<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IP Address Tracker</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Rubik', sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

    header {
      background: linear-gradient(135deg, hsl(260, 100%, 67%), hsl(290, 80%, 55%));
      display: flex; flex-direction: column; align-items: center;
      padding: 2rem 1rem 5rem;
    }
    header h1 { color: #fff; font-size: 1.75rem; font-weight: 500; margin-bottom: 1.5rem; }

    .search-form { display: flex; width: 100%; max-width: 32rem; }
    .search-form input {
      flex: 1; height: 3.5rem; padding: 0 1.5rem; font-size: 1.1rem;
      border: none; border-radius: 1rem 0 0 1rem; outline: none; color: #333;
    }
    .search-form input::placeholder { color: #aaa; }
    .search-form button {
      width: 3.5rem; height: 3.5rem; background: #000; border: none;
      border-radius: 0 1rem 1rem 0; cursor: pointer; display: flex;
      align-items: center; justify-content: center; transition: background 0.2s;
    }
    .search-form button:hover { background: #333; }
    .search-form button svg { fill: none; stroke: #fff; stroke-width: 2; }

    .info-card {
      position: relative; z-index: 20; margin: -2rem auto 0;
      background: #fff; border-radius: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      width: 90%; max-width: 56rem; padding: 1.5rem 2rem;
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;
    }
    .info-block { padding: 0 1rem; border-right: 1px solid #e5e5e5; }
    .info-block:last-child { border-right: none; }
    .info-block label { font-size: 0.68rem; font-weight: 700; letter-spacing: 0.15em; color: #999; display: block; margin-bottom: 0.25rem; }
    .info-block span { font-size: 1.15rem; font-weight: 700; color: #1a1a1a; }
    .skeleton { display: inline-block; width: 8rem; height: 1.4rem; background: #e5e5e5; border-radius: 4px; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.4; } }

    #map { flex: 1; z-index: 10; margin-top: -1rem; }

     @media (max-width: 794px) {
      .info-card { grid-template-columns: 1fr 1fr; }
      .info-block { border-right: none; }
    } 


    



@media (max-width: 640px) {
  .header {
    padding: 24px 12px 72px;
  }

  .header h1 {
    font-size: 1.25rem;
    margin-bottom: 16px;
  }

  .search-form {
    max-width: 100%;
  }

  .search-input {
    height: 48px;
    font-size: 14px;
    padding: 0 14px;
  }

  .search-btn {
    height: 48px;
    width: 48px;
  }

  .info-card {
    grid-template-columns: 1fr;
    padding: 20px 16px;
    gap: 14px;
    margin-top: -56px;
  }

  .info-card > div {
    padding: 0;
    border-left: none !important;
  }

  .info-label {
    font-size: 10px;
  }

  .info-value {
    font-size: 16px;
  }
}



     @media (max-width: 640px) {
      .info-card { grid-template-columns: 1fr 1fr; }
      .info-block { border-right: none; }
    } 



@media (max-width: 360px) {
  .header {
    padding: 16px 8px 64px;
  }

  .header h1 {
    font-size: 1.1rem;
  }

  .search-input {
    padding: 0 10px;
    font-size: 13px;
  }

  .info-card {
    padding: 16px 12px;
    gap: 12px;
    border-radius: 12px;
  }

  .info-value {
    font-size: 15px;
    word-break: break-all;
  }
}


@media (max-width: 294px) {
  .header {
    padding: 16px 100px 64px; 
  
  }

  .header h1 {
    font-size: 1.1rem;
  }

  .search-input {
    padding: 0 10px;
    font-size: 13px;
  }

  .info-card {
    padding: 16px 12px;
    gap: 12px;
    border-radius: 12px; 
   
  }

  .info-value {
    font-size: 15px;
    word-break: break-all; align-items: center;
  }
}


  </style>
</head>
<body>
  <header>
    <h1>IP Address Tracker</h1>
    <form class="search-form" id="searchForm">
      <input type="text" id="searchInput" placeholder="Search for any IP address or domain" />
      <button type="submit">
        <svg width="16" height="16" viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6" /></svg>
      </button>
    </form>
  </header>

  <div class="info-card">
    <div class="info-block"><label>IP ADDRESS</label><span id="ipValue" class="skeleton"></span></div>
    <div class="info-block"><label>LOCATION</label><span id="locValue" class="skeleton"></span></div>
    <div class="info-block"><label>TIMEZONE</label><span id="tzValue" class="skeleton"></span></div>
    <div class="info-block"><label>ISP</label><span id="ispValue" class="skeleton"></span></div>
  </div>

  <div id="map"></div>

  <script>
    const blackIcon = L.icon({
      iconUrl: 'https://cdn.jsdelivr.net/gh/pointhi/leaflet-color-markers@master/img/marker-icon-2x-black.png',
      shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png',
      iconSize: [25, 41], iconAnchor: [12, 41], shadowSize: [41, 41]
    });

    let map, marker;

    function initMap(lat, lon) {
      map = L.map('map', { zoomControl: false, attributionControl: false }).setView([lat, lon], 13);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      marker = L.marker([lat, lon], { icon: blackIcon }).addTo(map);
    }

    function updateMap(lat, lon) {
      if (!map) { initMap(lat, lon); return; }
      map.flyTo([lat, lon], 13, { duration: 1.5 });
      marker.setLatLng([lat, lon]);
    }

    function setInfo(ip, loc, tz, isp) {
      document.getElementById('ipValue').textContent = ip || '—';
      document.getElementById('locValue').textContent = loc || '—';
      document.getElementById('tzValue').textContent = tz || '—';
      document.getElementById('ispValue').textContent = isp || '—';
    }

    async function fetchIP(query) {
  try {
    // const proxy = "https://cors-anywhere.herokuapp.com/";
  const url = query ? `https://ipapi.co/${query}/json/` : 'https://ipapi.co/json/';
    const res = await fetch(url);
    if (!res.ok) throw new Error('Failed to fetch IP data');
    const data = await res.json();

    // Some properties may differ by API
    const ip = data.ip || 'N/A';
    const location = `${data.city || 'N/A'}, ${data.region || 'N/A'} ${data.postal || ''}`;
    const timezone = data.timezone || 'N/A';
    const isp = data.org || data.isp || 'N/A'; // Try multiple keys

    setInfo(ip, location, `UTC ${timezone}`, isp);
    updateMap(data.latitude, data.longitude);

  } catch (err) {
    alert('Failed to fetch IP data: ' + err.message);
  }
}

    document.getElementById('searchForm').addEventListener('submit', e => {
      e.preventDefault();
      const val = document.getElementById('searchInput').value.trim();
      if (val) fetchIP(val);
    });

    fetchIP();
  </script>
</body>
</html>